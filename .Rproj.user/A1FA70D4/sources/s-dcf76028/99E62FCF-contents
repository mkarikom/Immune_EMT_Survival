
library(doParallel)
cl <- makeCluster(8)
registerDoParallel(cl)

allThree = osPfi = osDfi = c()
# no caveats on OS, DFI, PFI
allThree = c("BLCA", # Urothelial Bladder Carcinoma 
             "CESC", # Cervical Squamous Cell Carcinoma and Endocervical Adenocarcinoma 
             "COAD", # Colon Adenocarcinoma
             "ESCA", # Esophageal Carcinoma
             "HNSC", # Head-Neck Squamous Cell Carcinoma
             "KIRP", # Cervical Kidney renal papillary cell carcinoma
             "LIHC", # Liver Hepatocellular Carcinoma 
             "LUAD", # Lung Adenocarcinoma
             "LUSC", # Lung Squamous Cell Carcinoma
             "OV", # Ovarian cancer
             "PAAD", # Pancreatic ductal adenocarcinoma
             "SARC", # Sarcoma
             "STAD", # Stomach Adenocarcinoma
             "UCEC") # Uterine Corpus Endometrial Carcinoma
# no caveats on OS and PFI
# osPfi = c("GBM",
#           "KIRC",
#           "MESO",
#           "SKCM",
#           "UVM")

tumortypes = c(allThree, osPfi, osDfi)

foreach(i = tumortypes) %dopar% {
  if(!file.exists(paste0("./DataRDS/gene_sets/", i, "_genesets.RDS"))){
    data = readRDS(paste0("./DataRDS/raw_data/", i, "_data.RDS"))
    saveSets(tumortype = i,
             genes = data$data_genes,
             savedir = "./DataRDS/gene_sets/")
  }
}

stopCluster(cl)
